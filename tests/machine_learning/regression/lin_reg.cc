#include "../../../third_party/catch.hpp"
#include "../../../src/machine_learning/regression/linear_regression/lin_reg.h"
#include <string>

TEST_CASE("Testing linear regression [1]"){
  std::vector<std::vector<double> > data = {{0, 10}, {1, 11}, {2, 12}, {3, 13}, {4, 14}, {5, 15}, {6, 16}, {7, 17}, {8, 18}, {9, 19}, {10, 20}, {11, 21}, {12, 22}, {13, 23}, {14, 24}, {15, 25}, {16, 26}, {17, 27}, {18, 28}, {19, 29}, {20, 30}, {21, 31}, {22, 32}, {23, 33}, {24, 34}, {25, 35}, {26, 36}, {27, 37}, {28, 38}, {29, 39}, {30, 40}, {31, 41}, {32, 42}, {33, 43}, {34, 44}, {35, 45}, {36, 46}, {37, 47}, {38, 48}, {39, 49}, {40, 50}, {41, 51}, {42, 52}, {43, 53}, {44, 54}, {45, 55}, {46, 56}, {47, 57}, {48, 58}, {49, 59}, {50, 60}, {51, 61}, {52, 62}, {53, 63}, {54, 64}, {55, 65}, {56, 66}, {57, 67}, {58, 68}, {59, 69}, {60, 70}, {61, 71}, {62, 72}, {63, 73}, {64, 74}, {65, 75}, {66, 76}, {67, 77}, {68, 78}, {69, 79}, {70, 80}, {71, 81}, {72, 82}, {73, 83}, {74, 84}, {75, 85}, {76, 86}, {77, 87}, {78, 88}, {79, 89}, {80, 90}, {81, 91}, {82, 92}, {83, 93}, {84, 94}, {85, 95}, {86, 96}, {87, 97}, {88, 98}, {89, 99}, {90, 100}, {91, 101}, {92, 102}, {93, 103}, {94, 104}, {95, 105}, {96, 106}, {97, 107}, {98, 108}, {99, 109}, {100, 110}, {101, 111}, {102, 112}, {103, 113}, {104, 114}, {105, 115}, {106, 116}, {107, 117}, {108, 118}, {109, 119}, {110, 120}, {111, 121}, {112, 122}, {113, 123}, {114, 124}, {115, 125}, {116, 126}, {117, 127}, {118, 128}, {119, 129}, {120, 130}, {121, 131}, {122, 132}, {123, 133}, {124, 134}, {125, 135}, {126, 136}, {127, 137}, {128, 138}, {129, 139}, {130, 140}, {131, 141}, {132, 142}, {133, 143}, {134, 144}, {135, 145}, {136, 146}, {137, 147}, {138, 148}, {139, 149}, {140, 150}, {141, 151}, {142, 152}, {143, 153}, {144, 154}, {145, 155}, {146, 156}, {147, 157}, {148, 158}, {149, 159}, {150, 160}, {151, 161}, {152, 162}, {153, 163}, {154, 164}, {155, 165}, {156, 166}, {157, 167}, {158, 168}, {159, 169}, {160, 170}, {161, 171}, {162, 172}, {163, 173}, {164, 174}, {165, 175}, {166, 176}, {167, 177}, {168, 178}, {169, 179}, {170, 180}, {171, 181}, {172, 182}, {173, 183}, {174, 184}, {175, 185}, {176, 186}, {177, 187}, {178, 188}, {179, 189}, {180, 190}, {181, 191}, {182, 192}, {183, 193}, {184, 194}, {185, 195}, {186, 196}, {187, 197}, {188, 198}, {189, 199}, {190, 200}, {191, 201}, {192, 202}, {193, 203}, {194, 204}, {195, 205}, {196, 206}, {197, 207}, {198, 208}, {199, 209}, {200, 210}, {201, 211}, {202, 212}, {203, 213}, {204, 214}, {205, 215}, {206, 216}, {207, 217}, {208, 218}, {209, 219}, {210, 220}, {211, 221}, {212, 222}, {213, 223}, {214, 224}, {215, 225}, {216, 226}, {217, 227}, {218, 228}, {219, 229}, {220, 230}, {221, 231}, {222, 232}, {223, 233}, {224, 234}, {225, 235}, {226, 236}, {227, 237}, {228, 238}, {229, 239}, {230, 240}, {231, 241}, {232, 242}, {233, 243}, {234, 244}, {235, 245}, {236, 246}, {237, 247}, {238, 248}, {239, 249}, {240, 250}, {241, 251}, {242, 252}, {243, 253}, {244, 254}, {245, 255}, {246, 256}, {247, 257}, {248, 258}, {249, 259}, {250, 260}, {251, 261}, {252, 262}, {253, 263}, {254, 264}, {255, 265}, {256, 266}, {257, 267}, {258, 268}, {259, 269}, {260, 270}, {261, 271}, {262, 272}, {263, 273}, {264, 274}, {265, 275}, {266, 276}, {267, 277}, {268, 278}, {269, 279}, {270, 280}, {271, 281}, {272, 282}, {273, 283}, {274, 284}, {275, 285}, {276, 286}, {277, 287}, {278, 288}, {279, 289}, {280, 290}, {281, 291}, {282, 292}, {283, 293}, {284, 294}, {285, 295}, {286, 296}, {287, 297}, {288, 298}, {289, 299}, {290, 300}, {291, 301}, {292, 302}, {293, 303}, {294, 304}, {295, 305}, {296, 306}, {297, 307}, {298, 308}, {299, 309}, {300, 310}, {301, 311}, {302, 312}, {303, 313}, {304, 314}, {305, 315}, {306, 316}, {307, 317}, {308, 318}, {309, 319}, {310, 320}, {311, 321}, {312, 322}, {313, 323}, {314, 324}, {315, 325}, {316, 326}, {317, 327}, {318, 328}, {319, 329}, {320, 330}, {321, 331}, {322, 332}, {323, 333}, {324, 334}, {325, 335}, {326, 336}, {327, 337}, {328, 338}, {329, 339}, {330, 340}, {331, 341}, {332, 342}, {333, 343}, {334, 344}, {335, 345}, {336, 346}, {337, 347}, {338, 348}, {339, 349}, {340, 350}, {341, 351}, {342, 352}, {343, 353}, {344, 354}, {345, 355}, {346, 356}, {347, 357}, {348, 358}, {349, 359}, {350, 360}, {351, 361}, {352, 362}, {353, 363}, {354, 364}, {355, 365}, {356, 366}, {357, 367}, {358, 368}, {359, 369}, {360, 370}, {361, 371}, {362, 372}, {363, 373}, {364, 374}, {365, 375}, {366, 376}, {367, 377}, {368, 378}, {369, 379}, {370, 380}, {371, 381}, {372, 382}, {373, 383}, {374, 384}, {375, 385}, {376, 386}, {377, 387}, {378, 388}, {379, 389}, {380, 390}, {381, 391}, {382, 392}, {383, 393}, {384, 394}, {385, 395}, {386, 396}, {387, 397}, {388, 398}, {389, 399}, {390, 400}, {391, 401}, {392, 402}, {393, 403}, {394, 404}, {395, 405}, {396, 406}, {397, 407}, {398, 408}, {399, 409}};
  linear_regression lin_reg(data);
  std::pair<double, double> a_b = lin_reg.get_results();
  REQUIRE(a_b == std::make_pair(10.0, 1.0));

  double prediction = lin_reg.predict(2.2);
  REQUIRE(prediction - 12 <= 1);
}
